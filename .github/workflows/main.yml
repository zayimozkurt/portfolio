name: Auto-Sync Upstream
on:
  schedule:
    - cron: '*/2 * * * *'
  workflow_dispatch: # Keeps the "Run workflow" button for testing

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Your Fork
        uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Essential for merging histories

      - name: Sync and Merge
        run: |
          git config --global user.name 'GitHub Action'
          git config --global user.email 'action@github.com'
          
          # 1. Point to the original source
          # REPLACE the URL below with the real one!
          git remote add upstream https://github.com/mehmetaltinbas/portfolio.git
          
          # 2. Get their latest code
          git fetch upstream
          
          # 3. Merge their main into your main
          git checkout main
          git merge upstream/main --allow-unrelated-histories -m "Auto-sync: merged upstream changes"
          
          # 4. Push back to your fork (triggers Vercel)
          git push origin main
